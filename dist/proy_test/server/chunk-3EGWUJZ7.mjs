import './polyfills.server.mjs';
import{a as j,b as B,e as G}from"./chunk-JLUPQTPX.mjs";import{b as Z}from"./chunk-UBRTC4KA.mjs";import{d as D,e as F,f as L,g as O,l as R,m as V,n as W,p as z,r as H,t as U,u as N,v as Y,w as q}from"./chunk-ATQ252IY.mjs";import{n as T,o as v,r as x}from"./chunk-XWQYVYLR.mjs";import{$ as I,$a as h,Fa as y,Fb as E,Sa as S,T as C,Ua as _,Wa as n,X as c,Xa as i,Ya as r,Za as k,_a as f,ab as a,ea as d,eb as g,fa as u,ga as l,ha as p,qb as M,ta as A}from"./chunk-TMLLLJKU.mjs";import{h as b}from"./chunk-5XUXGTUW.mjs";function et(e,t){if(e&1){let o=k();n(0,"div",1)(1,"div",2)(2,"button",3),f("click",function(){d(o);let m=h();return u(m.dismissPrompt())}),l(),n(3,"svg",4),r(4,"path",5),i()(),p(),n(5,"div",6)(6,"div",7),l(),n(7,"svg",8),r(8,"path",9),i()(),p(),n(9,"div")(10,"h3",10),a(11,"Instalar Tarjeta Digital"),i(),n(12,"p",11),a(13,"Acceso r\xE1pido desde tu pantalla de inicio"),i()()(),n(14,"div",12)(15,"div",13),l(),n(16,"svg",14),r(17,"path",15),i(),a(18," Funciona sin conexi\xF3n "),i(),p(),n(19,"div",13),l(),n(20,"svg",14),r(21,"path",15),i(),a(22," Carga m\xE1s r\xE1pido "),i(),p(),n(23,"div",13),l(),n(24,"svg",14),r(25,"path",15),i(),a(26," Experiencia nativa "),i()(),p(),n(27,"div",16)(28,"button",17),f("click",function(){d(o);let m=h();return u(m.installPWA())}),r(29,"div",18),n(30,"span",19),a(31,"Instalar"),i()(),n(32,"button",20),f("click",function(){d(o);let m=h();return u(m.dismissPrompt())}),a(33," Ahora no "),i()()()()}}var w=class e{constructor(t){this.platformId=t}showInstallPrompt=!1;deferredPrompt=null;installPromptDismissed=!1;ngOnInit(){x(this.platformId)&&this.initializePWAPrompt()}ngOnDestroy(){x(this.platformId)&&(window.removeEventListener("beforeinstallprompt",this.handleBeforeInstallPrompt),window.removeEventListener("appinstalled",this.handleAppInstalled))}initializePWAPrompt(){this.isPWAInstalled()||localStorage.getItem("pwa-install-dismissed")!=="true"&&(window.addEventListener("beforeinstallprompt",this.handleBeforeInstallPrompt.bind(this)),window.addEventListener("appinstalled",this.handleAppInstalled.bind(this)),setTimeout(()=>{this.checkAndShowPrompt()},1e4))}handleBeforeInstallPrompt=t=>{console.log("[PWA] beforeinstallprompt event triggered"),t.preventDefault(),this.deferredPrompt=t,this.checkAndShowPrompt()};handleAppInstalled=t=>{console.log("[PWA] App installed successfully"),this.showInstallPrompt=!1,this.deferredPrompt=null,localStorage.setItem("pwa-installed","true"),this.showSuccessMessage()};checkAndShowPrompt(){this.deferredPrompt&&!this.installPromptDismissed&&!this.isPWAInstalled()&&this.shouldShowPrompt()&&(this.showInstallPrompt=!0)}shouldShowPrompt(){let t=localStorage.getItem("pwa-visited")==="true",o=this.checkUserEngagement();return localStorage.setItem("pwa-visited","true"),t||o}checkUserEngagement(){let t=performance.now();return Date.now()-t>3e4||document.hasFocus()||localStorage.getItem("user-interacted")==="true"}isPWAInstalled(){return window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone===!0||localStorage.getItem("pwa-installed")==="true"}installPWA(){return b(this,null,function*(){if(!this.deferredPrompt){this.showFallbackInstructions();return}try{let{outcome:t}=yield this.deferredPrompt.prompt();console.log("[PWA] Install prompt outcome:",t),console.log(t==="accepted"?"[PWA] User accepted the install prompt":"[PWA] User dismissed the install prompt"),this.deferredPrompt=null,this.showInstallPrompt=!1}catch(t){console.error("[PWA] Error showing install prompt:",t),this.showFallbackInstructions()}})}dismissPrompt(){this.showInstallPrompt=!1,this.installPromptDismissed=!0,localStorage.setItem("pwa-install-dismissed","true");let t=Date.now()+7*24*60*60*1e3;localStorage.setItem("pwa-dismiss-expiry",t.toString())}showFallbackInstructions(){let t=navigator.userAgent.toLowerCase(),o="";t.includes("chrome")&&t.includes("android")?o='Toca el men\xFA de Chrome (\u22EE) y selecciona "Agregar a pantalla de inicio"':t.includes("safari")&&t.includes("iphone")||t.includes("safari")&&t.includes("ipad")?o='Toca el bot\xF3n de compartir (\u25A1) y luego "Agregar a pantalla de inicio"':o='Busca la opci\xF3n "Agregar a pantalla de inicio" o "Instalar aplicaci\xF3n" en el men\xFA de tu navegador',alert(`Para instalar esta aplicaci\xF3n:

${o}`),this.dismissPrompt()}showSuccessMessage(){console.log("[PWA] Installation successful! App is now available on your home screen.")}static \u0275fac=function(o){return new(o||e)(y(A))};static \u0275cmp=c({type:e,selectors:[["app-pwa-install-prompt"]],standalone:!0,features:[g],decls:1,vars:1,consts:[["class","pwa-install-prompt fixed bottom-4 left-4 right-4 md:left-auto md:right-4 md:w-96 z-50",4,"ngIf"],[1,"pwa-install-prompt","fixed","bottom-4","left-4","right-4","md:left-auto","md:right-4","md:w-96","z-50"],[1,"bg-gradient-to-r","from-black","via-gray-900","to-black","border","border-cyan-500/30","rounded-xl","p-4","backdrop-blur-md","shadow-2xl"],["aria-label","Cerrar",1,"absolute","top-2","right-2","text-gray-400","hover:text-white","transition-colors",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[1,"flex","items-center","mb-3"],[1,"w-12","h-12","rounded-xl","bg-gradient-to-r","from-cyan-500","to-purple-500","flex","items-center","justify-center","mr-3","flex-shrink-0"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6","text-white"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4"],[1,"text-white","font-semibold","text-sm"],[1,"text-gray-400","text-xs"],[1,"space-y-1","mb-4"],[1,"flex","items-center","text-xs","text-gray-300"],["fill","currentColor","viewBox","0 0 20 20",1,"w-3","h-3","text-cyan-400","mr-2","flex-shrink-0"],["fill-rule","evenodd","d","M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule","evenodd"],[1,"flex","space-x-2"],[1,"flex-1","bg-gradient-to-r","from-cyan-600","to-purple-600","hover:from-cyan-700","hover:to-purple-700","text-white","text-sm","font-medium","py-2.5","px-4","rounded-lg","transition-all","transform","hover:scale-105","relative","overflow-hidden",3,"click"],[1,"absolute","inset-0","bg-gradient-to-r","from-cyan-400","to-purple-400","opacity-0","hover:opacity-20","transition-opacity"],[1,"relative","z-10"],[1,"px-4","py-2.5","text-gray-400","hover:text-white","text-sm","font-medium","transition-colors",3,"click"]],template:function(o,s){o&1&&S(0,et,34,0,"div",0),o&2&&_("ngIf",s.showInstallPrompt)},dependencies:[v,T],styles:['.pwa-install-prompt[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideUp .3s ease-out}@keyframes _ngcontent-%COMP%_slideUp{0%{transform:translateY(100%);opacity:0}to{transform:translateY(0);opacity:1}}.pwa-install-prompt[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:-1px;background:linear-gradient(45deg,#0ff,#ff0080,#8000ff,#0ff);background-size:400% 400%;border-radius:12px;z-index:-1;animation:_ngcontent-%COMP%_borderGlow 3s ease-in-out infinite;opacity:.3}@keyframes _ngcontent-%COMP%_borderGlow{0%,to{background-position:0% 50%}50%{background-position:100% 50%}}']})};var P=class e{title="proy_test";static \u0275fac=function(o){return new(o||e)};static \u0275cmp=c({type:e,selectors:[["app-root"]],standalone:!0,features:[g],decls:2,vars:0,template:function(o,s){o&1&&r(0,"router-outlet")(1,"app-pwa-install-prompt")},dependencies:[z,v,q,w]})};var $=(e,t)=>{let o=C(Z),s=C(H);return o.isAuthenticated()?!0:(s.navigate(["/auth/login"],{queryParams:{returnUrl:t.url}}),!1)};var J=[{path:"auth",children:[{path:"login",loadComponent:()=>import("./chunk-BOO4JPLY.mjs").then(e=>e.LoginComponent),title:"Iniciar sesi\xF3n"},{path:"register",loadComponent:()=>import("./chunk-6G3RLAKN.mjs").then(e=>e.RegisterComponent),title:"Registrarse"},{path:"forgot-password",loadComponent:()=>import("./chunk-2RE2B53D.mjs").then(e=>e.ForgotPasswordComponent),title:"Recuperar contrase\xF1a"},{path:"reset-password",loadComponent:()=>import("./chunk-YZNLPR7J.mjs").then(e=>e.ResetPasswordComponent),title:"Restablecer contrase\xF1a"},{path:"",redirectTo:"login",pathMatch:"full"}]},{path:"",loadComponent:()=>import("./chunk-YIB5ZTCG.mjs").then(e=>e.VistaComponent),children:[{path:"",loadComponent:()=>import("./chunk-JQZA5DUQ.mjs").then(e=>e.InicioComponent),title:"Tarjeta Digital - Inicio"},{path:"about",loadComponent:()=>import("./chunk-JOG43MJH.mjs").then(e=>e.AboutComponent),title:"Acerca de - Tarjeta Digital"},{path:"cuenta",canActivate:[$],loadComponent:()=>import("./chunk-XK26ODYL.mjs").then(e=>e.CuentaComponent),title:"Mi Cuenta - Tarjeta Digital"},{path:"**",loadComponent:()=>import("./chunk-LVF5ZG25.mjs").then(e=>e.PageNotFoundComponent),title:"P\xE1gina no encontrada"}]}];var K={providers:[M({eventCoalescing:!0}),N(J,Y(U)),W(),I(O,V,j),D(L(),F()),B()]};var ot={providers:[G()]},Q=E(K,ot);var nt=()=>R(P,Q),Ht=nt;export{Ht as a};
